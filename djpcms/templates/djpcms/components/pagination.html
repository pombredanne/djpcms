{% load djpmodutils %}
{% if form %}<div class="search-form">
{{ form }}
</div>{% endif %}{% if headers %}{% load tablesorter %}
<div id="{% if id %}{{ id }}{% else %}Pagination{% endif %}" class="jquery-pagination"></div>
{% totable headers paginator.qs djp appmodel %}
{% else %}{% ifnotequal paginator.pages 1 %}
<div id="{% if id %}{{ id }}{% else %}Pagination{% endif %}" class="jquery-pagination"></div>{% endifnotequal %}
{% for item in items %}
{{ item }}{% endfor %}{% endif %}
<script>
$(document).ready(function(){
    // Create pagination element with options from form
    var optInit = {
    		items_per_page: {{ paginator.per_page }},
    		current_page: {{ paginator.page }} - 1,
    		num_edge_entries: {{ paginator.numends }}, 
    		callback: function(current_page, elem) {
    			  var cp  = current_page + 1;
    			  var data = "{{ paginator.datadict }}";
    			  var url = "{{ url }}?page=" + cp;
    			  if(data) {
        			  url += '&' + data;
    			  }
    			  window.location = url;
    		}
    };
    $("#{% if id %}{{ id }}{% else %}Pagination{% endif %}").pagination({{ paginator.total }}, optInit);
});
</script>